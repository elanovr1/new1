# æ™ºèƒ½ç”µé”€ç‹ - æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Android APP                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           Presentation Layer (UI)                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Login  â”‚  â”‚  Main  â”‚  â”‚Customer â”‚  â”‚ Dialer â”‚ â”‚ â”‚
â”‚  â”‚  â”‚Activityâ”‚  â”‚Activityâ”‚  â”‚ Detail  â”‚  â”‚Activityâ”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â†•                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            Business Logic Layer                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚Auto Dialerâ”‚  â”‚ Customer â”‚  â”‚   Follow Up    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Service  â”‚  â”‚ Manager  â”‚  â”‚    Manager     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â†•                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Data Layer                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   Room   â”‚  â”‚  Odoo APIâ”‚  â”‚  Preferences   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Database â”‚  â”‚  Client  â”‚  â”‚                â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Odoo Backend System                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   CRM Customer Management Module (v2)             â”‚ â”‚
â”‚  â”‚   - Customer Model                                â”‚ â”‚
â”‚  â”‚   - Follow Up Model                               â”‚ â”‚
â”‚  â”‚   - User Management                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ æ¨¡å—è®¾è®¡

### 1. Presentation Layer (å±•ç¤ºå±‚)

#### Activityç»„ä»¶

| Activity | åŠŸèƒ½ | å…³é”®ç‰¹æ€§ |
|---------|------|----------|
| SplashActivity | å¯åŠ¨é¡µ | æ£€æŸ¥ç™»å½•çŠ¶æ€ã€åˆå§‹åŒ– |
| LoginActivity | ç™»å½•é¡µ | Odooè®¤è¯ã€æœåŠ¡å™¨é…ç½® |
| MainActivity | ä¸»é¡µ | å®¢æˆ·åˆ—è¡¨ã€å¯¼èˆªã€æœç´¢ |
| CustomerDetailActivity | å®¢æˆ·è¯¦æƒ… | æŸ¥çœ‹/ç¼–è¾‘å®¢æˆ·ä¿¡æ¯ |
| AutoDialerActivity | è‡ªåŠ¨æ‹¨å· | æ‹¨å·æ§åˆ¶ã€é˜Ÿåˆ—ç®¡ç† |
| FollowUpActivity | æ·»åŠ è·Ÿè¿› | å¿«é€Ÿè·Ÿè¿›ã€æ¨¡æ¿é€‰æ‹© |
| StatisticsActivity | ç»Ÿè®¡æŠ¥è¡¨ | æ•°æ®å¯è§†åŒ–ã€å›¾è¡¨ |
| SettingsActivity | è®¾ç½® | æ‹¨å·é…ç½®ã€è´¦å·ç®¡ç† |

#### Adapterç»„ä»¶

```java
// å®¢æˆ·åˆ—è¡¨é€‚é…å™¨
public class CustomerAdapter extends RecyclerView.Adapter<CustomerViewHolder> {
    - æ˜¾ç¤ºå®¢æˆ·åˆ—è¡¨
    - æ”¯æŒä¸‹æ‹‰åˆ·æ–°
    - ç‚¹å‡»äº‹ä»¶å¤„ç†
    - é•¿æŒ‰èœå•
}

// è·Ÿè¿›è®°å½•é€‚é…å™¨
public class FollowUpAdapter extends RecyclerView.Adapter<FollowUpViewHolder> {
    - æ˜¾ç¤ºè·Ÿè¿›å†å²
    - æ—¶é—´çº¿å±•ç¤º
    - ç¼–è¾‘/åˆ é™¤æ“ä½œ
}
```

---

### 2. Business Logic Layer (ä¸šåŠ¡é€»è¾‘å±‚)

#### AutoDialerService (è‡ªåŠ¨æ‹¨å·æœåŠ¡)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- ç»´æŠ¤æ‹¨å·é˜Ÿåˆ—
- æ§åˆ¶æ‹¨å·èŠ‚å¥
- ç›‘å¬é€šè¯çŠ¶æ€
- ç»Ÿè®¡æ‹¨å·æ•°æ®

**çŠ¶æ€æœºï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     start      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IDLE    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚ DIALING  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘                           â”‚
     â”‚ stop                 pauseâ”‚resume
     â”‚                           â†“
     â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  PAUSED  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ–¹æ³•ï¼š**
```java
void startDialing(List<Customer> customers, String strategy, int interval)
void pauseDialing()
void resumeDialing()
void stopDialing()
void skipCurrent()
DialerStatus getStatus()
```

#### CallStateService (é€šè¯çŠ¶æ€æœåŠ¡)

**åŠŸèƒ½ï¼š**
- ç›‘å¬é€šè¯çŠ¶æ€å˜åŒ–
- è®°å½•é€šè¯æ—¶é•¿
- è§¦å‘è·Ÿè¿›çª—å£
- æ›´æ–°å®¢æˆ·ä¿¡æ¯

**é€šè¯çŠ¶æ€æµè½¬ï¼š**
```
IDLE â†’ RINGING â†’ OFFHOOK â†’ IDLE
                    â†“
              (è®°å½•é€šè¯)
                    â†“
           (å¼¹å‡ºè·Ÿè¿›çª—å£)
```

#### SyncService (æ•°æ®åŒæ­¥æœåŠ¡)

**åŠŸèƒ½ï¼š**
- åå°å®šæœŸåŒæ­¥
- å¢é‡åŒæ­¥ç­–ç•¥
- å†²çªè§£å†³
- ç¦»çº¿ç¼“å­˜

**åŒæ­¥ç­–ç•¥ï¼š**
```java
1. å¯åŠ¨æ—¶å…¨é‡åŒæ­¥
2. å®šæ—¶å¢é‡åŒæ­¥ï¼ˆæ¯5åˆ†é’Ÿï¼‰
3. ç”¨æˆ·æ“ä½œåç«‹å³åŒæ­¥
4. ç½‘ç»œæ¢å¤åè‡ªåŠ¨åŒæ­¥
```

---

### 3. Data Layer (æ•°æ®å±‚)

#### Room Database (æœ¬åœ°æ•°æ®åº“)

**æ•°æ®è¡¨è®¾è®¡ï¼š**

```sql
-- customersè¡¨
CREATE TABLE customers (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    phone TEXT,
    wechat_name TEXT,
    customer_type TEXT,
    level TEXT,
    status TEXT,
    requirement TEXT,
    remark TEXT,
    intended_property TEXT,
    owner_id INTEGER,
    follow_count INTEGER,
    write_date TEXT,
    create_date TEXT,
    is_synced INTEGER DEFAULT 1,
    last_call_time INTEGER DEFAULT 0,
    call_count INTEGER DEFAULT 0
);

-- follow_upsè¡¨
CREATE TABLE follow_ups (
    local_id INTEGER PRIMARY KEY AUTOINCREMENT,
    id INTEGER,
    customer_id INTEGER NOT NULL,
    follower_id INTEGER,
    follow_content TEXT NOT NULL,
    follow_time TEXT,
    result TEXT,
    next_follow_time TEXT,
    create_date TEXT,
    is_synced INTEGER DEFAULT 0,
    call_duration INTEGER DEFAULT 0,
    FOREIGN KEY(customer_id) REFERENCES customers(id)
);

-- call_logsè¡¨
CREATE TABLE call_logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    customer_id INTEGER NOT NULL,
    phone_number TEXT,
    call_time TEXT,
    call_duration INTEGER,
    call_type TEXT,  -- outgoing, incoming, missed
    is_connected INTEGER DEFAULT 0,
    FOREIGN KEY(customer_id) REFERENCES customers(id)
);
```

**DAOæ¥å£ï¼š**

```java
@Dao
public interface CustomerDao {
    @Query("SELECT * FROM customers ORDER BY write_date ASC")
    List<Customer> getAllCustomers();
    
    @Query("SELECT * FROM customers WHERE id = :customerId")
    Customer getCustomerById(int customerId);
    
    @Insert(onConflict = OnConflictStrategy.REPLACE)
    void insertCustomers(List<Customer> customers);
    
    @Update
    void updateCustomer(Customer customer);
    
    @Delete
    void deleteCustomer(Customer customer);
    
    @Query("SELECT * FROM customers WHERE is_synced = 0")
    List<Customer> getUnsyncedCustomers();
}
```

#### Odoo API Client

**APIè°ƒç”¨æµç¨‹ï¼š**

```
1. æ„å»ºè¯·æ±‚å‚æ•°
   â†“
2. æ·»åŠ è®¤è¯ä¿¡æ¯ (session_id)
   â†“
3. å‘é€HTTPè¯·æ±‚
   â†“
4. è§£æå“åº”
   â†“
5. å¤„ç†ç»“æœ/é”™è¯¯
```

**æ ¸å¿ƒæ¥å£ï¼š**

```java
// è®¤è¯
boolean authenticate(String url, String db, String user, String pwd)

// æŸ¥è¯¢å®¢æˆ·
List<Customer> getCustomers(int limit, int offset)

// æœç´¢å®¢æˆ·
List<Customer> searchCustomers(String query)

// åˆ›å»ºè·Ÿè¿›
int createFollowUp(FollowUp followUp)

// æ›´æ–°å®¢æˆ·
boolean updateCustomer(int id, Map<String, Object> values)

// è·å–è·Ÿè¿›è®°å½•
List<FollowUp> getFollowUps(int customerId)
```

**é”™è¯¯å¤„ç†ï¼š**

```java
try {
    // APIè°ƒç”¨
} catch (AuthenticationException e) {
    // è®¤è¯å¤±è´¥ï¼Œé‡æ–°ç™»å½•
} catch (NetworkException e) {
    // ç½‘ç»œé”™è¯¯ï¼Œæç¤ºç”¨æˆ·
} catch (ServerException e) {
    // æœåŠ¡å™¨é”™è¯¯ï¼Œè®°å½•æ—¥å¿—
}
```

---

## ğŸ”„ æ•°æ®æµ

### å®¢æˆ·æ•°æ®æµ

```
Odoo Server
     â†“ (1) åŒæ­¥è¯·æ±‚
OdooApiClient
     â†“ (2) JSONå“åº”
Parser (Gson)
     â†“ (3) Customerå¯¹è±¡
Room Database
     â†“ (4) æŸ¥è¯¢
CustomerAdapter
     â†“ (5) æ˜¾ç¤º
RecyclerView
```

### æ‹¨å·æµç¨‹

```
ç”¨æˆ·è§¦å‘æ‹¨å·
     â†“
AutoDialerService
     â†“ (1) æ£€æŸ¥æƒé™
PermissionUtils
     â†“ (2) å‘èµ·æ‹¨å·
Android Phone System
     â†“ (3) é€šè¯ä¸­
CallStateReceiver
     â†“ (4) é€šè¯ç»“æŸ
FollowUpActivity
     â†“ (5) ä¿å­˜è·Ÿè¿›
OdooApiClient â†’ Odoo Server
     â†“ (6) åŒæ­¥å®Œæˆ
Room Database
```

---

## ğŸ¯ è®¾è®¡æ¨¡å¼

### 1. å•ä¾‹æ¨¡å¼ (Singleton)

```java
// OdooApiClientä½¿ç”¨å•ä¾‹
public class OdooApiClient {
    private static OdooApiClient instance;
    
    private OdooApiClient(Context context) {
        // åˆå§‹åŒ–
    }
    
    public static synchronized OdooApiClient getInstance(Context context) {
        if (instance == null) {
            instance = new OdooApiClient(context);
        }
        return instance;
    }
}
```

### 2. è§‚å¯Ÿè€…æ¨¡å¼ (Observer)

```java
// è‡ªåŠ¨æ‹¨å·æœåŠ¡ç›‘å¬
public interface DialerListener {
    void onDialStart(Customer customer);
    void onDialComplete(Customer customer, boolean success);
    void onQueueComplete();
    void onError(String error);
}

// ä½¿ç”¨
service.setListener(new DialerListener() {
    @Override
    public void onDialStart(Customer customer) {
        // æ›´æ–°UI
    }
});
```

### 3. é€‚é…å™¨æ¨¡å¼ (Adapter)

```java
// RecyclerViewé€‚é…å™¨
public class CustomerAdapter extends RecyclerView.Adapter<CustomerViewHolder> {
    // å°†Customeræ•°æ®é€‚é…åˆ°RecyclerView
}
```

### 4. ç­–ç•¥æ¨¡å¼ (Strategy)

```java
// æ‹¨å·ç­–ç•¥
public interface DialStrategy {
    List<Customer> sort(List<Customer> customers);
}

public class PriorityDialStrategy implements DialStrategy {
    @Override
    public List<Customer> sort(List<Customer> customers) {
        // æŒ‰ä¼˜å…ˆçº§æ’åº
    }
}
```

---

## ğŸ”’ å®‰å…¨è®¾è®¡

### 1. æ•°æ®åŠ å¯†

```java
// æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
public class SecurityUtils {
    // åŠ å¯†å¯†ç 
    public static String encrypt(String password) {
        // AESåŠ å¯†
    }
    
    // è§£å¯†å¯†ç 
    public static String decrypt(String encrypted) {
        // AESè§£å¯†
    }
}
```

### 2. æƒé™ç®¡ç†

```java
// åŠ¨æ€æƒé™ç”³è¯·
@RuntimePermissions
public class MainActivity extends AppCompatActivity {
    @NeedsPermission(Manifest.permission.CALL_PHONE)
    void makeCall() {
        // æ‹¨æ‰“ç”µè¯
    }
    
    @OnPermissionDenied(Manifest.permission.CALL_PHONE)
    void onPermissionDenied() {
        // æƒé™è¢«æ‹’ç»
    }
}
```

### 3. ç½‘ç»œå®‰å…¨

```java
// HTTPSè¯ä¹¦éªŒè¯
OkHttpClient client = new OkHttpClient.Builder()
    .certificatePinner(new CertificatePinner.Builder()
        .add("your-domain.com", "sha256/AAAAAAAAAAAAA...")
        .build())
    .build();
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. åˆ—è¡¨ä¼˜åŒ–

```java
// RecyclerViewä¼˜åŒ–
recyclerView.setHasFixedSize(true);
recyclerView.setItemViewCacheSize(20);
recyclerView.setDrawingCacheEnabled(true);
```

### 2. æ•°æ®åº“ä¼˜åŒ–

```sql
-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_customers_phone ON customers(phone);
CREATE INDEX idx_customers_level ON customers(level);
CREATE INDEX idx_follow_ups_customer ON follow_ups(customer_id);
```

### 3. å†…å­˜ä¼˜åŒ–

```java
// ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼
private WeakReference<Context> contextRef;

// åŠæ—¶é‡Šæ”¾èµ„æº
@Override
protected void onDestroy() {
    super.onDestroy();
    if (serviceConnection != null) {
        unbindService(serviceConnection);
    }
}
```

### 4. å›¾ç‰‡ä¼˜åŒ–

```java
// ä½¿ç”¨GlideåŠ è½½å›¾ç‰‡
Glide.with(context)
    .load(imageUrl)
    .placeholder(R.drawable.placeholder)
    .error(R.drawable.error)
    .diskCacheStrategy(DiskCacheStrategy.ALL)
    .into(imageView);
```

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—ç­–ç•¥

```java
public class LogUtils {
    private static final String TAG = "SalesDialer";
    
    public static void d(String message) {
        if (BuildConfig.DEBUG) {
            Log.d(TAG, message);
        }
    }
    
    public static void e(String message, Throwable throwable) {
        Log.e(TAG, message, throwable);
        // ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨
        CrashReporter.report(message, throwable);
    }
}
```

### æ€§èƒ½ç›‘æ§

```java
// æ–¹æ³•è€—æ—¶ç›‘æ§
long startTime = System.currentTimeMillis();
// æ‰§è¡Œæ“ä½œ
long endTime = System.currentTimeMillis();
LogUtils.d("Operation took: " + (endTime - startTime) + "ms");
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```java
@Test
public void testCustomerValidation() {
    Customer customer = new Customer();
    customer.setPhone("13800138000");
    assertTrue(customer.isValidPhone());
    
    customer.setPhone("123");
    assertFalse(customer.isValidPhone());
}
```

### é›†æˆæµ‹è¯•

```java
@Test
public void testOdooApiLogin() throws Exception {
    OdooApiClient client = OdooApiClient.getInstance(context);
    boolean result = client.authenticate(
        "https://test-server.com",
        "test_db",
        "admin",
        "admin"
    );
    assertTrue(result);
}
```

---

## ğŸ“ˆ æ‰©å±•æ€§è®¾è®¡

### æ’ä»¶åŒ–æ¶æ„

```java
// å®šä¹‰æ’ä»¶æ¥å£
public interface DialPlugin {
    void beforeDial(Customer customer);
    void afterDial(Customer customer, boolean success);
}

// å®ç°æ’ä»¶
public class StatisticsPlugin implements DialPlugin {
    @Override
    public void afterDial(Customer customer, boolean success) {
        // ç»Ÿè®¡æ‹¨å·æ•°æ®
    }
}
```

### æ¨¡å—åŒ–è®¾è®¡

```
app/
â”œâ”€â”€ feature-customer/      # å®¢æˆ·ç®¡ç†æ¨¡å—
â”œâ”€â”€ feature-dialer/        # æ‹¨å·æ¨¡å—
â”œâ”€â”€ feature-statistics/    # ç»Ÿè®¡æ¨¡å—
â”œâ”€â”€ core/                  # æ ¸å¿ƒæ¨¡å—
â””â”€â”€ common/                # é€šç”¨æ¨¡å—
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-01-30  
**ç»´æŠ¤è€…**: Development Team
